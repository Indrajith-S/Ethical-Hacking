- We're going to start with the spiking off with the spiking demonstration.
- Get your windows machine ready and do the following.
- Run vulnserver application as Administrator.
- After doing so, open Immunity Debugger as Administrator.
- Once you've opened Immunity Debugger, click on file located on the toolbar of the application and select vulnserver and click on attach.
- Once that is done, click on the play button situated just below the debug option in toolbar and we can see that its running in the bottom right corner.
- Once you're done with these steps, Open terminal in your linux machine and type the following to establish connection to vulnserver
	`nc -nv <ip of windows machine> 9999` : -n for ip address. -v for verbose
- Once the connection is established you should be able to see the screen saying "Welcome to Vulnerable Server! Enter HELP for help."
- Type `HELP`
- We get a list of valid commands.
- (The primary command we're going to be focusing on is this TRUN command)
- Here we're going to do spiking. What spiking does is we're going to take these commands one at a time to check which one is vulnerable, ex- STATS. We'll throw a bunch of commands at it and see if the debugger overflows and the program crashes. If it does then it sure is vulnerable.
- If not, then we move to the next command.


- So to perform spiking we'll be using a tool called generic_send_tcp.
- Let's EXIT from vulnserver in our terminal for now and type `generic_send_tcp` which reveals its usage to us.
- So for this along with some others we need a spike script.
- Let's make one for STATS. To do so type `nano stats.spk`
	```
	s_readline();
	s_string("STATS ");
	s_string_variable("0");
	```
- First we read a line here, then we're going to take a string, ie, STATS, as that's the command we're focusing on first and then we have this variable here.
- We'll be sending this variable in mutiple iterations, ie, could be 1000 at a time or even 20000 at a time just to find something that breaks the program.
- Now let's send the spike script. To do so type
	`generic_send_tcp <windows ip> 9999 stats.spk 0 0 `
- As it starts running you can observe in vulnserver cmd that we're connecting to the client and then disconnecting from the client but it doesn't look really vulnerable. So let's stop the spike using CTRL + C on the linux machine.
- Now let's take a look at trun spiking. Create a similar trun.spk file by typing
	`nano trun.spk` and then typing in 
	```
	s_readline();
	s_string("TRUN ");
	s_string_variable("0");
	```
	and send it using generic tcp.
- Immediately Immunity starts blinking and it shows that it's paused and that there was an access violation when executing.
- For now you can kill the process in kali.
- So your vulnserver has actually crashed and can be noticed once you detach it from immunity.
- This clearly shows that there is a vulnerability and we can look into the registers for more information.
- we can see a bunch of A's written after TRUN in the first line.
- So what's happened here is that its actually filled over.
- If you notice EBP we se 41414141 which is hexcode for four A's.
- So we can see that we've gone over the ESP as well and we've gone over the EIP.
- So now we've overwritten everything and we know that EIP is the important factor. Once we've controlled EIP, we can point it to something malicious.
- Next up we'll be doing that by Fuzzing.